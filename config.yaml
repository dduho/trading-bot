# Trading Bot Configuration

# Trading pairs to monitor
# Large diversification: crypto + forex pour trouver les meilleures opportunités
symbols:
  # Cryptocurrencies
  - BTC/USDT    # Bitcoin - référence du marché
  - ETH/USDT    # Ethereum - 2ème crypto, très liquide
  - SOL/USDT    # Solana - haute volatilité, layer 1
  - BNB/USDT    # Binance Coin - exchange token
  - XRP/USDT    # Ripple - paiements internationaux
  - ADA/USDT    # Cardano - smart contracts
  - AVAX/USDT   # Avalanche - DeFi, layer 1
  - DOGE/USDT   # Dogecoin - meme coin volatile
  - MATIC/USDT  # Polygon - scaling Ethereum
  - DOT/USDT    # Polkadot - interopérabilité
  - LINK/USDT   # Chainlink - oracles
  - UNI/USDT    # Uniswap - DEX leader
  - ATOM/USDT   # Cosmos - interchain
  - LTC/USDT    # Litecoin - paiements rapides
  - NEAR/USDT   # Near Protocol - layer 1

  # Forex pairs (more stable, less volatile than crypto)
  - EUR/USDT    # Euro/Dollar - paire forex majeure
  - GBP/USDT    # Pound/Dollar - paire forex majeure
  - AUD/USDT    # Australian Dollar - matières premières

# Analysis timeframes
timeframes:
  - 5m   # 5 minutes (timeframe principal - moins de bruit)
  - 15m  # 15 minutes
  - 1h   # 1 heure (pour tendance globale)

# Technical indicators configuration
indicators:
  rsi:
    period: 14
    overbought: 70
    oversold: 30

  macd:
    fast_period: 12
    slow_period: 26
    signal_period: 9

  moving_averages:
    sma_short: 20
    sma_long: 50
    ema_short: 12
    ema_long: 26

  bollinger_bands:
    period: 20
    std_dev: 2

# Trading strategy
strategy:
  name: "Multi-Indicator Strategy"
  min_confidence: 0.25  # 25% confidence minimum - plus sélectif = meilleure qualité

  # Signal weights - Pondération basée sur analyse performance
  weights:
    rsi: 0.25            # 25% RSI - bon indicateur de retournement
    macd: 0.25           # 25% MACD - trend following efficace
    moving_averages: 0.20  # 20% Moving Averages
    volume: 0.15         # 15% Volume - confirmateur
    trend: 0.15          # 15% Trend - confirmateur

  anti_trend_filter:
    enabled: true        # ACTIVÉ - évite trades contre-tendance dangereux
    extra_conf_margin: 0.10  # Requiert 10% confidence supplémentaire contre tendance

# Risk management
risk:
  max_position_size_percent: 5    # 5% par position - plus agressif pour paper trading
  stop_loss_percent: 2.0          # 2% stop loss - protection raisonnable
  take_profit_percent: 6.0        # 6% take profit - ratio 3:1 réaliste
  trailing_stop_percent: 1.5      # Trailing stop à 1.5% pour sécuriser profits (fallback)
  atr_trailing_multiplier: 1.8    # Trailing stop basé sur ATR (distance = ATR * 1.8)
  break_even_rr: 1.0              # Passer au break-even à partir de 1R gagné
  max_risk_per_trade_percent: 1.0 # Plafond de risque dur par trade
  trade_cost_percent: 0.08        # Coût estimé aller/retour (frais + slippage) en %
  slippage_buffer_percent: 0.05   # Buffer intégré dans le sizing pour éviter l'oversize
  risk_reward_ratio: 3.0          # Ratio 3:1 minimum
  max_open_positions: 3           # 3 positions max - meilleure concentration
  max_daily_trades: 50            # 50 trades/jour max - qualité > quantité
  max_daily_loss_percent: 10.0    # Stop trading si -10% dans la journée
  max_position_duration_minutes: 720  # Time-stop à 12h
  cooldown_seconds: 60            # 60s entre trades - évite overtrading
  volatility_cooldown_multiplier: 0.0 # Désactivé pour ne pas bloquer opportunités
  volatility_cooldown_atr_threshold_pct: 2.5 # N'applique que si ATR% > 2.5%
  volatility_cooldown_max_extra: 2.0    # Cap extension à 2x le cooldown
  correlation_groups:             # Limiter l'exposition corrélée (1 position max par groupe)
    - ["EUR/USDT", "GBP/USDT", "AUD/USDT"]  # Forex - tous corrélés
    - ["BTC/USDT", "ETH/USDT", "BNB/USDT", "SOL/USDT", "AVAX/USDT", "MATIC/USDT"]  # Crypto
  max_positions_per_group: 1      # Max 1 forex + 1 crypto simultanés (diversification)
  blocked_hours: []               # Désactivé - crypto trade 24/7
  close_all_on_loss_cut: false    # False: garde les positions gagnantes au cutoff

# Execution settings
execution:
  order_type: limit  # market or limit
  slippage_tolerance: 0.5  # % tolerance for price slippage

# Adaptive Learning System - OPTIMIZED pour apprentissage continu
learning:
  enabled: true  # Enable/disable learning system
  learning_interval_hours: 2  # OPTIMIZED: Apprentissage toutes les 2h (balance fréquence/données)
  min_trades_for_learning: 30  # OPTIMIZED: 30 trades minimum (balance données/rapidité)
  adaptation_aggressiveness: moderate  # MODÉRÉ: Changements prudents mais efficaces
  auto_apply_adaptations: true  # AUTO: Applique les améliorations automatiquement
  continuous_learning: true  # Mode apprentissage continu activé

  # ML Model settings
  ml_model:
    type: random_forest  # random_forest or gradient_boosting
    retrain_interval_hours: 6  # OPTIMIZED: Réentraînement toutes les 6h
    min_accuracy_threshold: 0.55  # REALISTIC: Accepte 55% (meilleur que hasard)
    incremental_learning: true  # Apprentissage incrémental
    auto_retrain_on_poor_performance: true  # Réentraînement auto si mauvaise perf

  # Learning goals - OBJECTIFS RÉALISTES ET PROGRESSIFS
  target_metrics:
    win_rate: 0.55  # REALISTIC: Target 55% win rate (progressif)
    profit_factor: 1.8  # IMPROVED: Target profit factor 1.8
    sharpe_ratio: 1.2  # IMPROVED: Target Sharpe ratio 1.2
  
  # Performance monitoring for continuous improvement
  performance_monitoring:
    check_interval_hours: 1  # Vérifier la performance toutes les heures
    degradation_threshold: 0.10  # Si performance baisse de 10%, réapprendre
    improvement_reward_multiplier: 1.5  # Favoriser les stratégies qui s'améliorent

# Telegram Notifications
notifications:
  enabled: true
  telegram:
    enabled: true
    
    # Types de notifications à envoyer
    trades:
      enabled: true
      include_entry: true
      include_exit: true
      min_pnl_percent: 0.0  # Notifier tous les trades (0 = tous)
    
    learning:
      enabled: true
      include_adaptations: true
      include_metrics: true
    
    errors:
      enabled: true
      critical_only: false  # Notifier toutes les erreurs
    
    reports:
      enabled: true
      schedule: "daily"  # daily, every_6h, every_12h
      time: "20:00"  # Heure du rapport quotidien (Europe/Paris)
    
    # Formatage des messages
    formatting:
      use_emoji: true
      use_markdown: true
      include_charts: false
      timezone: "Europe/Paris"
    
    # Rate limiting pour éviter le spam
    rate_limit:
      max_messages_per_hour: 30
      cooldown_between_messages: 2  # secondes entre chaque message

# Market Alerts - Surveillance des indices et actions (analyse seule, pas de trading)
market_alerts:
  enabled: true
  check_interval_minutes: 15  # Analyser toutes les 15 minutes

  # Indices à surveiller (via API externe Yahoo Finance)
  indices:
    - symbol: "^FCHI"     # CAC 40
      name: "CAC 40"
      alert_threshold: 0.5  # Alerter si mouvement > 0.5%

    - symbol: "^GDAXI"    # DAX
      name: "DAX"
      alert_threshold: 0.5

    - symbol: "^GSPC"     # S&P 500
      name: "S&P 500"
      alert_threshold: 0.5

    - symbol: "EURUSD=X"  # EUR/USD Forex
      name: "EUR/USD"
      alert_threshold: 0.2

    - symbol: "GBPUSD=X"  # GBP/USD Forex
      name: "GBP/USD"
      alert_threshold: 0.2

  # Actions à surveiller
  stocks:
    - symbol: "UBI.PA"    # Ubisoft
      name: "Ubisoft"
      alert_threshold: 1.0  # Alerter si mouvement > 1%

  # Notifications Telegram pour les alertes
  telegram_alerts:
    enabled: true
    send_on_movement: true      # Envoyer alerte sur mouvement significatif
    send_technical_analysis: true  # Inclure analyse technique (RSI, MACD)
    send_trade_suggestion: true    # Suggérer BUY/SELL/HOLD
